{% extends 'Myapp/main.html' %}

{% load static %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'Myapp/Css/detail.css' %}">
{% endblock css %}

{% block content%}

    {% if messages %}
        <p id="successMsg">{{success_message}}</p>
    {% endif %}

    {% if product %}

        <div id="container">
            <!-- The image container of the product -->
            <div id="img-container">
                <img src="{{ product.product_image.url }}">
            </div>

            <!-- Information about the product -->
            <div id="side-container">
                <div id="product-info">
                    <h2>{{ product.name|capfirst }}</h2>
                    <p class="price">price: Rs.{{ product.price }} </p>
                    <div id="rating">
                        <p>Avg rating: </p>
                        <?xml version="1.0" ?><svg id="Star" style="width:20px" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
                            .st0{fill:#FFEC5C;}
                            .st1{fill:#B2A32F;}
                        </style><g><path class="st0" d="M23.264,18.413l4.552-4.637c0.26-0.264,0.179-0.588,0.147-0.682c-0.035-0.105-0.149-0.355-0.446-0.4   l-6.29-0.955c-0.835-0.126-1.555-0.669-1.924-1.45l-2.813-5.956C16.348,4.033,16.1,4,16,4s-0.348,0.033-0.49,0.333l-2.813,5.956   c-0.37,0.781-1.089,1.324-1.925,1.45l-6.29,0.955c-0.296,0.045-0.41,0.294-0.445,0.4c-0.031,0.093-0.112,0.417,0.147,0.682   l4.552,4.637c0.588,0.599,0.858,1.459,0.72,2.3L8.382,27.26c-0.063,0.386,0.177,0.589,0.252,0.642   c0.119,0.084,0.306,0.154,0.535,0.032l5.626-3.091c0.754-0.417,1.655-0.415,2.41,0l5.626,3.091   c0.226,0.123,0.416,0.052,0.534-0.031c0.075-0.054,0.315-0.257,0.253-0.643l-1.074-6.547   C22.406,19.871,22.676,19.012,23.264,18.413z"/><path class="st1" d="M29.243,15.177c0.701-0.715,0.938-1.755,0.616-2.716c-0.311-0.932-1.093-1.6-2.042-1.744l-6.291-0.955   c-0.176-0.027-0.331-0.149-0.415-0.327l-2.813-5.956C17.867,2.567,16.987,2,16,2c0,0,0,0,0,0c-0.987,0-1.868,0.567-2.298,1.479   l-2.813,5.956c-0.084,0.178-0.24,0.3-0.416,0.327l-6.291,0.955c-0.949,0.145-1.731,0.813-2.042,1.745   c-0.32,0.961-0.083,2.001,0.618,2.716l4.552,4.637c0.144,0.146,0.209,0.361,0.174,0.574l-1.075,6.547   c-0.167,1.018,0.244,2.014,1.071,2.6c0.436,0.308,0.939,0.463,1.446,0.463c0.413,0,0.827-0.104,1.207-0.312l5.626-3.091h0   c0.153-0.084,0.328-0.084,0.483,0l5.625,3.091c0.849,0.466,1.862,0.407,2.652-0.15c0.828-0.585,1.239-1.581,1.071-2.6l-1.073-6.546   c-0.035-0.214,0.029-0.43,0.174-0.576L29.243,15.177z M23.365,27.902c-0.118,0.083-0.309,0.154-0.534,0.031l-5.626-3.091   c-0.754-0.415-1.655-0.417-2.41,0l-5.626,3.091c-0.229,0.122-0.417,0.052-0.535-0.032c-0.075-0.053-0.316-0.256-0.252-0.642   l1.075-6.547c0.138-0.841-0.132-1.701-0.72-2.3l-4.552-4.637c-0.26-0.265-0.179-0.589-0.147-0.682   c0.035-0.105,0.149-0.355,0.445-0.4l6.29-0.955c0.836-0.126,1.555-0.669,1.925-1.45l2.813-5.956C15.652,4.033,15.9,4,16,4   s0.348,0.033,0.489,0.333l2.813,5.956c0.369,0.781,1.089,1.324,1.924,1.45l6.29,0.955c0.297,0.045,0.411,0.294,0.446,0.4   c0.031,0.093,0.112,0.417-0.147,0.682l-4.552,4.637c-0.588,0.599-0.857,1.458-0.72,2.3l1.074,6.547   C23.681,27.646,23.44,27.849,23.365,27.902z"/></g></svg>
                        <?xml version="1.0" ?><svg id="Star" style="width:20px" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
                            .st0{fill:#FFEC5C;}
                            .st1{fill:#B2A32F;}
                        </style><g><path class="st0" d="M23.264,18.413l4.552-4.637c0.26-0.264,0.179-0.588,0.147-0.682c-0.035-0.105-0.149-0.355-0.446-0.4   l-6.29-0.955c-0.835-0.126-1.555-0.669-1.924-1.45l-2.813-5.956C16.348,4.033,16.1,4,16,4s-0.348,0.033-0.49,0.333l-2.813,5.956   c-0.37,0.781-1.089,1.324-1.925,1.45l-6.29,0.955c-0.296,0.045-0.41,0.294-0.445,0.4c-0.031,0.093-0.112,0.417,0.147,0.682   l4.552,4.637c0.588,0.599,0.858,1.459,0.72,2.3L8.382,27.26c-0.063,0.386,0.177,0.589,0.252,0.642   c0.119,0.084,0.306,0.154,0.535,0.032l5.626-3.091c0.754-0.417,1.655-0.415,2.41,0l5.626,3.091   c0.226,0.123,0.416,0.052,0.534-0.031c0.075-0.054,0.315-0.257,0.253-0.643l-1.074-6.547   C22.406,19.871,22.676,19.012,23.264,18.413z"/><path class="st1" d="M29.243,15.177c0.701-0.715,0.938-1.755,0.616-2.716c-0.311-0.932-1.093-1.6-2.042-1.744l-6.291-0.955   c-0.176-0.027-0.331-0.149-0.415-0.327l-2.813-5.956C17.867,2.567,16.987,2,16,2c0,0,0,0,0,0c-0.987,0-1.868,0.567-2.298,1.479   l-2.813,5.956c-0.084,0.178-0.24,0.3-0.416,0.327l-6.291,0.955c-0.949,0.145-1.731,0.813-2.042,1.745   c-0.32,0.961-0.083,2.001,0.618,2.716l4.552,4.637c0.144,0.146,0.209,0.361,0.174,0.574l-1.075,6.547   c-0.167,1.018,0.244,2.014,1.071,2.6c0.436,0.308,0.939,0.463,1.446,0.463c0.413,0,0.827-0.104,1.207-0.312l5.626-3.091h0   c0.153-0.084,0.328-0.084,0.483,0l5.625,3.091c0.849,0.466,1.862,0.407,2.652-0.15c0.828-0.585,1.239-1.581,1.071-2.6l-1.073-6.546   c-0.035-0.214,0.029-0.43,0.174-0.576L29.243,15.177z M23.365,27.902c-0.118,0.083-0.309,0.154-0.534,0.031l-5.626-3.091   c-0.754-0.415-1.655-0.417-2.41,0l-5.626,3.091c-0.229,0.122-0.417,0.052-0.535-0.032c-0.075-0.053-0.316-0.256-0.252-0.642   l1.075-6.547c0.138-0.841-0.132-1.701-0.72-2.3l-4.552-4.637c-0.26-0.265-0.179-0.589-0.147-0.682   c0.035-0.105,0.149-0.355,0.445-0.4l6.29-0.955c0.836-0.126,1.555-0.669,1.925-1.45l2.813-5.956C15.652,4.033,15.9,4,16,4   s0.348,0.033,0.489,0.333l2.813,5.956c0.369,0.781,1.089,1.324,1.924,1.45l6.29,0.955c0.297,0.045,0.411,0.294,0.446,0.4   c0.031,0.093,0.112,0.417-0.147,0.682l-4.552,4.637c-0.588,0.599-0.857,1.458-0.72,2.3l1.074,6.547   C23.681,27.646,23.44,27.849,23.365,27.902z"/></g></svg>
                        <?xml version="1.0" ?><svg id="Star" style="width:20px" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
                            .st0{fill:#FFEC5C;}
                            .st1{fill:#B2A32F;}
                        </style><g><path class="st0" d="M23.264,18.413l4.552-4.637c0.26-0.264,0.179-0.588,0.147-0.682c-0.035-0.105-0.149-0.355-0.446-0.4   l-6.29-0.955c-0.835-0.126-1.555-0.669-1.924-1.45l-2.813-5.956C16.348,4.033,16.1,4,16,4s-0.348,0.033-0.49,0.333l-2.813,5.956   c-0.37,0.781-1.089,1.324-1.925,1.45l-6.29,0.955c-0.296,0.045-0.41,0.294-0.445,0.4c-0.031,0.093-0.112,0.417,0.147,0.682   l4.552,4.637c0.588,0.599,0.858,1.459,0.72,2.3L8.382,27.26c-0.063,0.386,0.177,0.589,0.252,0.642   c0.119,0.084,0.306,0.154,0.535,0.032l5.626-3.091c0.754-0.417,1.655-0.415,2.41,0l5.626,3.091   c0.226,0.123,0.416,0.052,0.534-0.031c0.075-0.054,0.315-0.257,0.253-0.643l-1.074-6.547   C22.406,19.871,22.676,19.012,23.264,18.413z"/><path class="st1" d="M29.243,15.177c0.701-0.715,0.938-1.755,0.616-2.716c-0.311-0.932-1.093-1.6-2.042-1.744l-6.291-0.955   c-0.176-0.027-0.331-0.149-0.415-0.327l-2.813-5.956C17.867,2.567,16.987,2,16,2c0,0,0,0,0,0c-0.987,0-1.868,0.567-2.298,1.479   l-2.813,5.956c-0.084,0.178-0.24,0.3-0.416,0.327l-6.291,0.955c-0.949,0.145-1.731,0.813-2.042,1.745   c-0.32,0.961-0.083,2.001,0.618,2.716l4.552,4.637c0.144,0.146,0.209,0.361,0.174,0.574l-1.075,6.547   c-0.167,1.018,0.244,2.014,1.071,2.6c0.436,0.308,0.939,0.463,1.446,0.463c0.413,0,0.827-0.104,1.207-0.312l5.626-3.091h0   c0.153-0.084,0.328-0.084,0.483,0l5.625,3.091c0.849,0.466,1.862,0.407,2.652-0.15c0.828-0.585,1.239-1.581,1.071-2.6l-1.073-6.546   c-0.035-0.214,0.029-0.43,0.174-0.576L29.243,15.177z M23.365,27.902c-0.118,0.083-0.309,0.154-0.534,0.031l-5.626-3.091   c-0.754-0.415-1.655-0.417-2.41,0l-5.626,3.091c-0.229,0.122-0.417,0.052-0.535-0.032c-0.075-0.053-0.316-0.256-0.252-0.642   l1.075-6.547c0.138-0.841-0.132-1.701-0.72-2.3l-4.552-4.637c-0.26-0.265-0.179-0.589-0.147-0.682   c0.035-0.105,0.149-0.355,0.445-0.4l6.29-0.955c0.836-0.126,1.555-0.669,1.925-1.45l2.813-5.956C15.652,4.033,15.9,4,16,4   s0.348,0.033,0.489,0.333l2.813,5.956c0.369,0.781,1.089,1.324,1.924,1.45l6.29,0.955c0.297,0.045,0.411,0.294,0.446,0.4   c0.031,0.093,0.112,0.417-0.147,0.682l-4.552,4.637c-0.588,0.599-0.857,1.458-0.72,2.3l1.074,6.547   C23.681,27.646,23.44,27.849,23.365,27.902z"/></g></svg>
                        <?xml version="1.0" ?><svg id="Star" style="width:20px" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
                            .st0{fill:#FFEC5C;}
                            .st1{fill:#B2A32F;}
                        </style><g><path class="st0" d="M23.264,18.413l4.552-4.637c0.26-0.264,0.179-0.588,0.147-0.682c-0.035-0.105-0.149-0.355-0.446-0.4   l-6.29-0.955c-0.835-0.126-1.555-0.669-1.924-1.45l-2.813-5.956C16.348,4.033,16.1,4,16,4s-0.348,0.033-0.49,0.333l-2.813,5.956   c-0.37,0.781-1.089,1.324-1.925,1.45l-6.29,0.955c-0.296,0.045-0.41,0.294-0.445,0.4c-0.031,0.093-0.112,0.417,0.147,0.682   l4.552,4.637c0.588,0.599,0.858,1.459,0.72,2.3L8.382,27.26c-0.063,0.386,0.177,0.589,0.252,0.642   c0.119,0.084,0.306,0.154,0.535,0.032l5.626-3.091c0.754-0.417,1.655-0.415,2.41,0l5.626,3.091   c0.226,0.123,0.416,0.052,0.534-0.031c0.075-0.054,0.315-0.257,0.253-0.643l-1.074-6.547   C22.406,19.871,22.676,19.012,23.264,18.413z"/><path class="st1" d="M29.243,15.177c0.701-0.715,0.938-1.755,0.616-2.716c-0.311-0.932-1.093-1.6-2.042-1.744l-6.291-0.955   c-0.176-0.027-0.331-0.149-0.415-0.327l-2.813-5.956C17.867,2.567,16.987,2,16,2c0,0,0,0,0,0c-0.987,0-1.868,0.567-2.298,1.479   l-2.813,5.956c-0.084,0.178-0.24,0.3-0.416,0.327l-6.291,0.955c-0.949,0.145-1.731,0.813-2.042,1.745   c-0.32,0.961-0.083,2.001,0.618,2.716l4.552,4.637c0.144,0.146,0.209,0.361,0.174,0.574l-1.075,6.547   c-0.167,1.018,0.244,2.014,1.071,2.6c0.436,0.308,0.939,0.463,1.446,0.463c0.413,0,0.827-0.104,1.207-0.312l5.626-3.091h0   c0.153-0.084,0.328-0.084,0.483,0l5.625,3.091c0.849,0.466,1.862,0.407,2.652-0.15c0.828-0.585,1.239-1.581,1.071-2.6l-1.073-6.546   c-0.035-0.214,0.029-0.43,0.174-0.576L29.243,15.177z M23.365,27.902c-0.118,0.083-0.309,0.154-0.534,0.031l-5.626-3.091   c-0.754-0.415-1.655-0.417-2.41,0l-5.626,3.091c-0.229,0.122-0.417,0.052-0.535-0.032c-0.075-0.053-0.316-0.256-0.252-0.642   l1.075-6.547c0.138-0.841-0.132-1.701-0.72-2.3l-4.552-4.637c-0.26-0.265-0.179-0.589-0.147-0.682   c0.035-0.105,0.149-0.355,0.445-0.4l6.29-0.955c0.836-0.126,1.555-0.669,1.925-1.45l2.813-5.956C15.652,4.033,15.9,4,16,4   s0.348,0.033,0.489,0.333l2.813,5.956c0.369,0.781,1.089,1.324,1.924,1.45l6.29,0.955c0.297,0.045,0.411,0.294,0.446,0.4   c0.031,0.093,0.112,0.417-0.147,0.682l-4.552,4.637c-0.588,0.599-0.857,1.458-0.72,2.3l1.074,6.547   C23.681,27.646,23.44,27.849,23.365,27.902z"/></g></svg>
                        <?xml version="1.0" ?><svg id="Star" style="width:20px" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">
                            .st0{fill:#FFEC5C;}
                            .st1{fill:#B2A32F;}
                        </style><g><path class="st0" d="M23.264,18.413l4.552-4.637c0.26-0.264,0.179-0.588,0.147-0.682c-0.035-0.105-0.149-0.355-0.446-0.4   l-6.29-0.955c-0.835-0.126-1.555-0.669-1.924-1.45l-2.813-5.956C16.348,4.033,16.1,4,16,4s-0.348,0.033-0.49,0.333l-2.813,5.956   c-0.37,0.781-1.089,1.324-1.925,1.45l-6.29,0.955c-0.296,0.045-0.41,0.294-0.445,0.4c-0.031,0.093-0.112,0.417,0.147,0.682   l4.552,4.637c0.588,0.599,0.858,1.459,0.72,2.3L8.382,27.26c-0.063,0.386,0.177,0.589,0.252,0.642   c0.119,0.084,0.306,0.154,0.535,0.032l5.626-3.091c0.754-0.417,1.655-0.415,2.41,0l5.626,3.091   c0.226,0.123,0.416,0.052,0.534-0.031c0.075-0.054,0.315-0.257,0.253-0.643l-1.074-6.547   C22.406,19.871,22.676,19.012,23.264,18.413z"/><path class="st1" d="M29.243,15.177c0.701-0.715,0.938-1.755,0.616-2.716c-0.311-0.932-1.093-1.6-2.042-1.744l-6.291-0.955   c-0.176-0.027-0.331-0.149-0.415-0.327l-2.813-5.956C17.867,2.567,16.987,2,16,2c0,0,0,0,0,0c-0.987,0-1.868,0.567-2.298,1.479   l-2.813,5.956c-0.084,0.178-0.24,0.3-0.416,0.327l-6.291,0.955c-0.949,0.145-1.731,0.813-2.042,1.745   c-0.32,0.961-0.083,2.001,0.618,2.716l4.552,4.637c0.144,0.146,0.209,0.361,0.174,0.574l-1.075,6.547   c-0.167,1.018,0.244,2.014,1.071,2.6c0.436,0.308,0.939,0.463,1.446,0.463c0.413,0,0.827-0.104,1.207-0.312l5.626-3.091h0   c0.153-0.084,0.328-0.084,0.483,0l5.625,3.091c0.849,0.466,1.862,0.407,2.652-0.15c0.828-0.585,1.239-1.581,1.071-2.6l-1.073-6.546   c-0.035-0.214,0.029-0.43,0.174-0.576L29.243,15.177z M23.365,27.902c-0.118,0.083-0.309,0.154-0.534,0.031l-5.626-3.091   c-0.754-0.415-1.655-0.417-2.41,0l-5.626,3.091c-0.229,0.122-0.417,0.052-0.535-0.032c-0.075-0.053-0.316-0.256-0.252-0.642   l1.075-6.547c0.138-0.841-0.132-1.701-0.72-2.3l-4.552-4.637c-0.26-0.265-0.179-0.589-0.147-0.682   c0.035-0.105,0.149-0.355,0.445-0.4l6.29-0.955c0.836-0.126,1.555-0.669,1.925-1.45l2.813-5.956C15.652,4.033,15.9,4,16,4   s0.348,0.033,0.489,0.333l2.813,5.956c0.369,0.781,1.089,1.324,1.924,1.45l6.29,0.955c0.297,0.045,0.411,0.294,0.446,0.4   c0.031,0.093,0.112,0.417-0.147,0.682l-4.552,4.637c-0.588,0.599-0.857,1.458-0.72,2.3l1.074,6.547   C23.681,27.646,23.44,27.849,23.365,27.902z"/></g></svg>
                        <p style="margin-left: 20px; font-size: 12px; align-self: flex-end"> 21 reviews for this product</p>
                    </div>
                    <div id="des">
                        <h3 style="margin-bottom: 12px;">Product description</h3>
                        {% for key, value in product.description.items %}
                            <p>{{key}} : {{ value }}</p>
                        {% endfor %}
                    </div>    
                </div>
            
                <!-- order form -->
                <div id="order-container" >
                    <form id="order-form" action="{% url 'Myapp:order' product.slug %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{{ next }}">
                        <div id="orderQty-container">
                            <p> Quantity : </p>
                            <!-- Quantity decrement button -->
                            <?xml version="1.0" ?><svg id="subQty" onclick="subQty()" width="50px" height="35px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><g><path d="M256,48C141.1,48,48,141.1,48,256s93.1,208,208,208c114.9,0,208-93.1,208-208S370.9,48,256,48z M256,446.7     c-105.1,0-190.7-85.5-190.7-190.7c0-105.1,85.5-190.7,190.7-190.7c105.1,0,190.7,85.5,190.7,190.7     C446.7,361.1,361.1,446.7,256,446.7z"/></g></g><rect height="17" width="256" x="128" y="248"/></g></svg>
                            <!-- Quantiy for the order-->
                            <input type="number" id="orderQty" name="quantity" value="1" maxlength="1" size="1" readonly>
                            <!-- Quantity increment button -->
                            <?xml version="1.0" ?><svg id="addQty" onclick="addQty()" width="50px" height="35px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><g><g><path d="M256,48C141.1,48,48,141.1,48,256s93.1,208,208,208c114.9,0,208-93.1,208-208S370.9,48,256,48z M256,446.7 c-105.1,0-190.7-85.5-190.7-190.7S150.9,65.3,256,65.3S446.7,150.9,446.7,256S361.1,446.7,256,446.7z"/></g></g><g><polygon points="264.1,128 247.3,128 247.3,247.9 128,247.9 128,264.7 247.3,264.7 247.3,384 264.1,384 264.1,264.7 384,264.7 384,247.9 264.1,247.9 "/></g></g></svg>
                        </div>
                        <input class="btn btn-buy" type="submit" value="Buy"/>
                    </form>
                    <button data-product="{{product.id }}" data-user={{request.user}} class="addToCart btn btn-cart">Add to cart</button>
                </div>
                
            </div>
        </div>

        <!-- Rewiews different user gave for the product-->
        <div>
            <h3>Reviews</h3>
            {% for review in product.review_set.all %}
                    <div>
                        <h6>{{ review.user.username }}</h6>
                        <p>{{ review.review }}</p>
                    </div>
            {% endfor %}
        </div>
    {% endif %}
   
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static '/Myapp/JS/main.js'%}"></script>
    <script type="text/javascript" src="{% static '/Myapp/JS/detail.js'%}"></script>
{% endblock scripts %} 