{% extends 'Myapp/main.html' %}

{% load static %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'Myapp/Css/detail.css' %}">
{% endblock css %}

{% block content%}
    {% if messages %}
        <p id="successMsg">{{success_message}}</p>
    {% endif %}
    {% if product %}
        <div id="container">
            <div id="img-container">
                <img src="{{ product.product_image.url }}">
            </div>
            <div id="product-info">
                <h2>{{ product.name|capfirst }}</h2>
                <p id="des">{{ product.description}}</p>
                <p>price: Rs. {{ product.price }} </p>
                <!--Quantity-->
                <div>
                    <form id="order-form" action="{% url 'Myapp:order' product.slug %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{{ next }}">
                        <div style="display:flex; align-items: center;">
                            <svg id="subQty" onclick="subQty()" xmlns="http://www.w3.org/2000/svg" width="50" height="30" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">
                                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>
                            </svg>
                            <input type="number" id="orderQty" name="quantity" value="1" maxlength="1" size="1" readonly>
                            <svg id="addQty" onclick="addQty()" xmlns="http://www.w3.org/2000/svg" width="50" height="30" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
                                <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                            </svg>
                        </div>
        
                        <input class="btn btn-buy" type="submit" value="Buy"/>
                        <button data-product="{{product.id }}" data-user={{request.user}} class="addToCart btn btn-cart">Add to cart</button>
                    </form>
                    
                </div> 
            </div>   
        </div>

        <!-- Rewiews different user gave for the product-->
        <div>
            <h3>Reviews</h3>
            {% for review in product.review_set.all %}
                    <div>
                        <h6>{{ review.user.username }}</h6>
                        <p>{{ review.review }}</p>
                    </div>
            {% endfor %}
        </div>
    {% endif %}
   
{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static '/Myapp/JS/main.js'%}"></script>
    <script type="text/javascript" src="{% static '/Myapp/JS/detail.js'%}"></script>
{% endblock scripts %} 